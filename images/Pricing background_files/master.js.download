/* Copyright (C) 121 Marketing - 121marketing.com */

/* ========================================================================
   1-2-1 Modifications - Master
 ========================================================================== */

jQuery(function($) { 

	// Page Banner if doesn't exist
	$('body:not(.homepage) .tm-header-container .uk-slideshow > li .mod-title h1').each(function() {	
		var $this = $(this);
		if (!$this.html().length > 0) {
			var $current_title = $(document).attr('title');
			$this.html($current_title);
		}
	});	
	

	// Upcoming Events 
	$(function() {
  $('.event-info').hover(function() {
    $('span.mod_events_latest_date h5',this).css('color', 'white');
  }, function() {
    // on mouseout, reset the background color
    $('span.mod_events_latest_date h5',this).css('color', '');
  });
});
	
	// Tables 
	$('.uk-article table').each(function() {	
		var $this = $(this);
		if (!$this.parent().hasClass('uk-overflow-container')) {
			$this.wrap('<div class="uk-overflow-container" />');
		}
	});		

	// Virtuemart
	$( ".vm-col .addtocart-button input, .checkout-button-top .vm-button-correct" ).addClass( " uk-button uk-button-large" );
	$( ".vm-col input.uk-button" ).removeClass( " addtocart-button" );
	$( ".checkout-button-top .uk-button" ).removeClass( " vm-button-correct ");

	// Mijoshop
	$( 'input[name="seach_oc"]').attr('placeholder', 'Search');
	
	// Community Builder 
	$('.cbLostPassForm').addClass(' uk-panel uk-panel-box');
	$('.cb_form.form-auto').addClass(' uk-form ');
	$('.cb_template input[type="submit"]').addClass( " uk-button uk-button-large" ).removeClass( "btn btn-primary" );
	
	// ACY
	$('#acymodifyform .required').parent().parent().find('.acykey label').each(function() {
		var $this = $(this);
		$this.append(' <span class="field-required">*</span>')
	});			
	
	// Upcoming Events
	$('.events-121 .link-121').addClass('uk-button-link');
	
	// Event Registration
	$('form[name="frmcart"]').each(function() {
		var container = $(this).closest('.tm-content');
		container.find('h2').addClass('uk-h3');
	});	
	
	// Homepage Buttons
	$('.homepage-buttons li > .uk-panel').each(function() {
		var $this = $(this);
		$this.find(' h3, h3 + div').wrapAll( "<div class='button-wrapper'></div>" );
	});			
	$(".homepage-buttons .uk-slideset-nav").insertAfter(".homepage-buttons .uk-slidenav-position + .uk-flex > .uk-grid > div:first-child");
	$(".homepage-buttons .uk-slidenav-position + .uk-flex > .uk-grid").addClass( ' uk-grid-collapse ');

	// Testimonial Slider
	$(".testimonial-slider .uk-overlay-panel h3").each(function() {
		var $this = $(this);
		$this.insertAfter(".testimonial-slider .uk-overlay-panel > div").removeClass('uk-h3').addClass('quote-title');
	});				
	$(".testimonial-slider .uk-slideshow > li iframe").each(function() {
		var $this = $(this);
		$this.removeAttr('data-uk-cover').removeClass('uk-position-absolute').wrap( "<div class='embed-container' />" );
	});			
	
	// Parallax BG & Form
	
	$(document).ready(function(){

		function formSize() {
			var footerHeight = $(".tm-footer").height();
			var formHeight = $(".footer-top").height();	
			
			var newHeight = 0;
			
			if (formHeight > footerHeight) {
			
				newHeight = formHeight - footerHeight;
				$( ".home-parallax" ).css('height', newHeight);
			} 
			
			$( ".footer-top" ).css('margin-top', -Math.abs(newHeight));
		}
		
		$(".eclub-121").each(formSize);
		
		var resizeId;
		$(window).resize(function() {
				clearTimeout(resizeId);
				resizeId = setTimeout(doneResizing, 500);
		});
		 
		function doneResizing(){
			$(".eclub-121").each(formSize);
		}
			
	});
	
	// Sidebar
	$('.panel-fixed').each(function() {
		var $this = $(this);	
		var $containerHeight = $('#tm-main').outerHeight() - $('#tm-main').height();
		if (($this.height() < $('#tm-content').height()) && ($(window).height() > ($this.height() + $containerHeight))) {
			$this.attr("data-uk-sticky","{top: 35, media: 768, boundary: true}");
		}
	});	
	
	
//Page Animations

	$('.homepage .uk-article, .homepage .homepage-buttons, .homepage .testimonial-slider').attr("data-uk-scrollspy", "{cls:'uk-active'}");


	// ## Score Components ## //

	//Scorecard and Hole by Hole
  $('#holebyhole .uk-button').addClass(' uk-button-large ');
	

/* ========================================================================
   Versa Specific ADA fixes
 ========================================================================== */	
 
	$('.homepage-slideshow .uk-slideshow li > img').attr('alt', '');
 
 	// Home Buttons
		$('.homepage-buttons .button-wrapper h3 a').each(function() {
			$this = $(this);
			$slideTitle = $this.text();
			$this.parent().parent().parent().find('.uk-position-cover').html('<span class="uk-hidden">'+$slideTitle+'</span>');
			
			$this.parent().text($slideTitle);
			this.remove();
		});
		
	// To Top Scroller
	$('#tm-anchor-bottom').html('<span class="uk-hidden">Back to Top Scroller</span>').attr('aria-label', 'Back to Top');

});